<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmailJS Template Checker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
        .info { color: #17a2b8; }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #007bff;
            margin: 10px 0;
        }
        .step {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-envelope"></i> EmailJS Template Checker</h1>
        <p>This tool will help you identify the correct variable names for your EmailJS template.</p>
        
        <div class="step">
            <h3>Step 1: Check Your EmailJS Template</h3>
            <p>Go to <a href="https://dashboard.emailjs.com" target="_blank">EmailJS Dashboard</a> and check your template <code>template_pysusaq</code>.</p>
            <p>Look for these common variable patterns in your template:</p>
            <ul>
                <li><code>{{to_email}}</code> or <code>{{email}}</code> or <code>{{to}}</code></li>
                <li><code>{{subject}}</code></li>
                <li><code>{{message}}</code> or <code>{{body}}</code> or <code>{{content}}</code></li>
                <li><code>{{from_name}}</code> or <code>{{from}}</code></li>
            </ul>
        </div>

        <div class="step">
            <h3>Step 2: Test Different Variable Combinations</h3>
            <button class="test-button" onclick="testAllCombinations()">Test All Combinations</button>
            <div id="results"></div>
        </div>

        <div class="step">
            <h3>Step 3: Manual Template Test</h3>
            <p>If automatic testing doesn't work, try this manual approach:</p>
            <div class="code">
                // In your browser console, try:
                emailjs.send('service_32atpco', 'template_pysusaq', {
                    // Replace these with your actual template variables:
                    to_email: 'matthewswondwesen1@gmail.com',
                    subject: 'Test',
                    message: 'Test message'
                }).then(console.log).catch(console.error);
            </div>
        </div>
    </div>

    <script>
        // Initialize EmailJS
        emailjs.init("69G95V-4wBoCVMRVt");

        const resultsDiv = document.getElementById('results');

        function log(message, type = 'info') {
            const p = document.createElement('p');
            p.className = type;
            p.innerHTML = message;
            resultsDiv.appendChild(p);
            console.log(message);
        }

        async function testAllCombinations() {
            resultsDiv.innerHTML = '';
            log('üîç Testing all possible variable combinations...', 'info');

            const combinations = [
                // Standard EmailJS
                { name: 'Standard EmailJS', vars: { to_email: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message', from_name: 'Barber Studio' }},
                // Alternative names
                { name: 'Alternative 1', vars: { to: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message', from: 'Barber Studio' }},
                { name: 'Alternative 2', vars: { email: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message' }},
                { name: 'Alternative 3', vars: { recipient: 'matthewswondwesen1@gmail.com', subject: 'Test', body: 'Test message' }},
                { name: 'Alternative 4', vars: { to_email: 'matthewswondwesen1@gmail.com', subject: 'Test', body: 'Test message' }},
                { name: 'Alternative 5', vars: { to_email: 'matthewswondwesen1@gmail.com', subject: 'Test', content: 'Test message' }},
                // Minimal
                { name: 'Minimal 1', vars: { to_email: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message' }},
                { name: 'Minimal 2', vars: { email: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message' }},
                { name: 'Minimal 3', vars: { to: 'matthewswondwesen1@gmail.com', subject: 'Test', message: 'Test message' }}
            ];

            for (let i = 0; i < combinations.length; i++) {
                const combo = combinations[i];
                log(`<br>üß™ Testing ${combo.name}...`, 'info');
                log(`Variables: ${JSON.stringify(combo.vars)}`, 'info');

                try {
                    const result = await emailjs.send('service_32atpco', 'template_pysusaq', combo.vars);
                    log(`‚úÖ SUCCESS with ${combo.name}!`, 'success');
                    log(`Result: ${JSON.stringify(result)}`, 'success');
                    log(`<br>üéâ FOUND WORKING CONFIGURATION!<br>Use these variables in your booking system:`, 'success');
                    log(`<div class="code">${JSON.stringify(combo.vars, null, 2)}</div>`, 'success');
                    return;
                } catch (error) {
                    log(`‚ùå ${combo.name} failed: ${error.message}`, 'error');
                    if (error.text) {
                        log(`Error details: ${error.text}`, 'error');
                    }
                }
            }

            log('<br>‚ùå All combinations failed. Your template might need to be reconfigured.', 'error');
            log('Go to EmailJS dashboard and check your template variables.', 'warning');
        }
    </script>
</body>
</html>

